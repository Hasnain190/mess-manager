{"ast":null,"code":"import _slicedToArray from\"F:/mess-manager/mess_manager/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import AttendanceSheet from'./AttendanceSheet';import React,{useState,useEffect,useRef}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{getAttendance}from\"../../actions/attendance_actions\";import{useNavigate}from\"react-router-dom\";import{listUsers}from\"../../actions/user_actions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MonthlyAttendance(){var dispatch=useDispatch();var navigate=useNavigate();var _useSelector=useSelector(function(state){return state.userLogin;}),userInfo=_useSelector.userInfo;var _useSelector2=useSelector(function(state){return state.getAttendance;}),attendance=_useSelector2.attendance,error=_useSelector2.error,loading=_useSelector2.loading;var _useSelector3=useSelector(function(state){return state.userList;}),users=_useSelector3.users;useEffect(function(){if(userInfo&&userInfo.isAdmin){dispatch(listUsers());dispatch(getAttendance());var monthDateList=attendance===null||attendance===void 0?void 0:attendance.map(function(item){return Number(item.date.split(\"-\")[1]);});//[06,06,06]\nconvertToMonth(monthDateList[0]);}else{navigate('./login');}},[navigate,dispatch,userInfo]);function IdToStudant(_ref){var id=_ref.id;var name=users===null||users===void 0?void 0:users.find(function(user){return user.id===id;}).username;return/*#__PURE__*/_jsx(\"div\",{children:name});}var _useState=useState(),_useState2=_slicedToArray(_useState,2),month=_useState2[0],setMonth=_useState2[1];function convertToMonth(number){var monthName=Intl.DateTimeFormat('en',{month:'long'}).format(new Date(\"\".concat(number)));setMonth(monthName);return monthName;}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"h1 text-center text-dark\",id:\"pageHeaderTitle\",children:[\"Attendance Sheet of \",/*#__PURE__*/_jsx(\"code\",{children:month})]}),/*#__PURE__*/_jsx(AttendanceSheet,{month:12})]});}export default MonthlyAttendance;","map":{"version":3,"names":["AttendanceSheet","React","useState","useEffect","useRef","useSelector","useDispatch","getAttendance","useNavigate","listUsers","MonthlyAttendance","dispatch","navigate","state","userLogin","userInfo","attendance","error","loading","userList","users","isAdmin","monthDateList","map","item","Number","date","split","convertToMonth","IdToStudant","id","name","find","user","username","month","setMonth","number","monthName","Intl","DateTimeFormat","format","Date"],"sources":["F:/mess-manager/mess_manager/frontend/src/Screens/admin/MonthlyAttendance.js"],"sourcesContent":["import AttendanceSheet from './AttendanceSheet'\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { getAttendance } from \"../../actions/attendance_actions\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { listUsers } from \"../../actions/user_actions\";\r\n\r\n\r\n\r\nfunction MonthlyAttendance() {\r\n\r\n    const dispatch = useDispatch();\r\n    const navigate = useNavigate();\r\n\r\n\r\n    const { userInfo } = useSelector((state) => state.userLogin);\r\n\r\n    const { attendance, error, loading } = useSelector(state => state.getAttendance)\r\n    const { users } = useSelector(state => state.userList)\r\n    useEffect(() => {\r\n        if (userInfo && userInfo.isAdmin) {\r\n            dispatch(listUsers())\r\n            dispatch(getAttendance())\r\n            const monthDateList = attendance?.map(item => Number((item.date).split(\"-\")[1])) //[06,06,06]\r\n            convertToMonth(monthDateList[0])\r\n\r\n\r\n        } else {\r\n            navigate('./login')\r\n        }\r\n    }, [navigate, dispatch, userInfo])\r\n\r\n    function IdToStudant({ id }) {\r\n        const name = users?.find(user => user.id === id).username\r\n        return <div>{name}</div>\r\n    }\r\n\r\n\r\n\r\n    const [month, setMonth] = useState()\r\n    function convertToMonth(number) {\r\n        const monthName = Intl.DateTimeFormat('en', { month: 'long' }).format(new Date(`${number}`));\r\n        setMonth(monthName)\r\n        return monthName\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div class=\"h1 text-center text-dark\" id=\"pageHeaderTitle\">\r\n                Attendance Sheet of <code>{month}</code>\r\n            </div>\r\n\r\n            <AttendanceSheet month={12} />\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default MonthlyAttendance\r\n"],"mappings":"2HAAA,MAAOA,gBAAP,KAA4B,mBAA5B,CACA,MAAOC,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,MAArC,KAAmD,OAAnD,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,aAAT,KAA8B,kCAA9B,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,SAAT,KAA0B,4BAA1B,C,wFAIA,QAASC,kBAAT,EAA6B,CAEzB,GAAMC,SAAQ,CAAGL,WAAW,EAA5B,CACA,GAAMM,SAAQ,CAAGJ,WAAW,EAA5B,CAGA,iBAAqBH,WAAW,CAAC,SAACQ,KAAD,QAAWA,MAAK,CAACC,SAAjB,EAAD,CAAhC,CAAQC,QAAR,cAAQA,QAAR,CAEA,kBAAuCV,WAAW,CAAC,SAAAQ,KAAK,QAAIA,MAAK,CAACN,aAAV,EAAN,CAAlD,CAAQS,UAAR,eAAQA,UAAR,CAAoBC,KAApB,eAAoBA,KAApB,CAA2BC,OAA3B,eAA2BA,OAA3B,CACA,kBAAkBb,WAAW,CAAC,SAAAQ,KAAK,QAAIA,MAAK,CAACM,QAAV,EAAN,CAA7B,CAAQC,KAAR,eAAQA,KAAR,CACAjB,SAAS,CAAC,UAAM,CACZ,GAAIY,QAAQ,EAAIA,QAAQ,CAACM,OAAzB,CAAkC,CAC9BV,QAAQ,CAACF,SAAS,EAAV,CAAR,CACAE,QAAQ,CAACJ,aAAa,EAAd,CAAR,CACA,GAAMe,cAAa,CAAGN,UAAH,SAAGA,UAAH,iBAAGA,UAAU,CAAEO,GAAZ,CAAgB,SAAAC,IAAI,QAAIC,OAAM,CAAED,IAAI,CAACE,IAAN,CAAYC,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAD,CAAV,EAApB,CAAtB,CAAiF;AACjFC,cAAc,CAACN,aAAa,CAAC,CAAD,CAAd,CAAd,CAGH,CAPD,IAOO,CACHV,QAAQ,CAAC,SAAD,CAAR,CACH,CACJ,CAXQ,CAWN,CAACA,QAAD,CAAWD,QAAX,CAAqBI,QAArB,CAXM,CAAT,CAaA,QAASc,YAAT,MAA6B,IAANC,GAAM,MAANA,EAAM,CACzB,GAAMC,KAAI,CAAGX,KAAH,SAAGA,KAAH,iBAAGA,KAAK,CAAEY,IAAP,CAAY,SAAAC,IAAI,QAAIA,KAAI,CAACH,EAAL,GAAYA,EAAhB,EAAhB,EAAoCI,QAAjD,CACA,mBAAO,qBAAMH,IAAN,EAAP,CACH,CAID,cAA0B7B,QAAQ,EAAlC,wCAAOiC,KAAP,eAAcC,QAAd,eACA,QAASR,eAAT,CAAwBS,MAAxB,CAAgC,CAC5B,GAAMC,UAAS,CAAGC,IAAI,CAACC,cAAL,CAAoB,IAApB,CAA0B,CAAEL,KAAK,CAAE,MAAT,CAA1B,EAA6CM,MAA7C,CAAoD,GAAIC,KAAJ,WAAYL,MAAZ,EAApD,CAAlB,CACAD,QAAQ,CAACE,SAAD,CAAR,CACA,MAAOA,UAAP,CAEH,CAMD,mBACI,aAAK,SAAS,CAAC,WAAf,wBACI,aAAK,KAAK,CAAC,0BAAX,CAAsC,EAAE,CAAC,iBAAzC,+CACwB,sBAAOH,KAAP,EADxB,GADJ,cAKI,KAAC,eAAD,EAAiB,KAAK,CAAE,EAAxB,EALJ,GADJ,CASH,CAGD,cAAezB,kBAAf"},"metadata":{},"sourceType":"module"}