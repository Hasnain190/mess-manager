{"ast":null,"code":"import _slicedToArray from\"F:/mess-manager/mess_manager/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{getExpensesPerMonth}from'../../../actions/expenses_actions';import Loader from\"../../../components/Loader\";import Message from\"../../../components/Message\";import ConvertToMonth from'../../../components/ConvertToMonth';import{useDispatch,useSelector}from'react-redux';import{useEffect,useState}from'react';import Downloader from'../../../components/Downloader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function MonthlyExpenses(){var dispatch=useDispatch();var today=new Date().toISOString().substring(0,7);useEffect(function(){dispatch(getExpensesPerMonth(date.substring(5,7)));},[date,expensesPerMonth]);var _useSelector=useSelector(function(state){return state.getExpensesPerMonth;}),expensesPerMonth=_useSelector.expensesPerMonth,loading=_useSelector.loading,success=_useSelector.success;var handleSubmit=function handleSubmit(e){e.preventDefault();dispatch(getExpensesPerMonth(date.substring(5,7)));var TotalExpenses=expensesPerMonth===null||expensesPerMonth===void 0?void 0:expensesPerMonth.reduce(function(acc,cur){return acc+cur.expenses_per_day;},0);setTotalExpenses(TotalExpenses);console.log(TotalExpenses);};var _useState=useState(today),_useState2=_slicedToArray(_useState,2),date=_useState2[0],setDate=_useState2[1];var _useState3=useState(expensesPerMonth===null||expensesPerMonth===void 0?void 0:expensesPerMonth.reduce(function(acc,cur){return acc+cur.expenses_per_day;},0)),_useState4=_slicedToArray(_useState3,2),totalExpenses=_useState4[0],setTotalExpenses=_useState4[1];return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{class:\"h1 text-center text-dark\",id:\"expensesPageHeaderTitle\",children:[\"Get Expenses of\",/*#__PURE__*/_jsxs(\"form\",{className:\"form form-control\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"month\",id:\"date\",value:date,onChange:function onChange(e){return setDate(e.target.value);},max:today}),/*#__PURE__*/_jsx(\"button\",{className:\"button \",type:\"submit\",children:\"Get\"})]})]})}),/*#__PURE__*/_jsx(Downloader,{htmlInputId:\"expensesPageHeaderTitle\",name:\"Expenses-sheet\"}),/*#__PURE__*/_jsx(\"div\",{id:\"expensesPageHeaderTitle\",children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(\"table\",{class:\"table table-striped table-hover\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Total Attendances\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Expenses(PKR)\"})]})}),expensesPerMonth===null||expensesPerMonth===void 0?void 0:expensesPerMonth.map(function(item){return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:item.id}),/*#__PURE__*/_jsx(\"td\",{children:item.date}),/*#__PURE__*/_jsx(\"td\",{children:item.total_attendances}),/*#__PURE__*/_jsx(\"td\",{children:item.expenses_per_day})]},item.id)});}),/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:\"Total Expenses\"})})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{scope:\"row\",children:totalExpenses})})})]})})]});}","map":{"version":3,"names":["React","getExpensesPerMonth","Loader","Message","ConvertToMonth","useDispatch","useSelector","useEffect","useState","Downloader","MonthlyExpenses","dispatch","today","Date","toISOString","substring","date","expensesPerMonth","state","loading","success","handleSubmit","e","preventDefault","TotalExpenses","reduce","acc","cur","expenses_per_day","setTotalExpenses","console","log","setDate","totalExpenses","target","value","map","item","id","total_attendances"],"sources":["F:/mess-manager/mess_manager/frontend/src/Screens/admin/expenses/MonthlyExpenses.js"],"sourcesContent":["import React from 'react'\r\nimport { getExpensesPerMonth } from '../../../actions/expenses_actions'\r\nimport Loader from \"../../../components/Loader\";\r\nimport Message from \"../../../components/Message\";\r\nimport ConvertToMonth from '../../../components/ConvertToMonth';\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useEffect, useState } from 'react';\r\nimport Downloader from '../../../components/Downloader';\r\n\r\nexport default function MonthlyExpenses() {\r\n    const dispatch = useDispatch();\r\n    const today = new Date().toISOString().substring(0, 7);\r\n\r\n\r\n    useEffect(\r\n        () => {\r\n            dispatch(getExpensesPerMonth(date.substring(5, 7)))\r\n\r\n\r\n\r\n\r\n        }, [date, expensesPerMonth])\r\n\r\n\r\n    const { expensesPerMonth, loading, success } = useSelector(state => state.getExpensesPerMonth)\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        dispatch(getExpensesPerMonth(date.substring(5, 7)))\r\n\r\n        let TotalExpenses = expensesPerMonth?.reduce(function (acc, cur) {\r\n            return acc + cur.expenses_per_day\r\n        }, 0)\r\n\r\n        setTotalExpenses(TotalExpenses)\r\n\r\n        console.log(TotalExpenses)\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n    const [date, setDate] = useState(today)\r\n    const [totalExpenses, setTotalExpenses] = useState(expensesPerMonth?.reduce(function (acc, cur) {\r\n        return acc + cur.expenses_per_day\r\n    }, 0));\r\n\r\n\r\n    return (\r\n        <div className='container'>\r\n            <div >\r\n                <div class=\"h1 text-center text-dark\" id=\"expensesPageHeaderTitle\">\r\n                    Get Expenses of\r\n\r\n\r\n\r\n                    <form className=\"form form-control\" onSubmit={handleSubmit} >\r\n                        <input type=\"month\" id=\"date\" value={date} onChange={(e) => setDate(e.target.value)} max={today} />\r\n\r\n                        <button className=\"button \" type=\"submit\">Get</button>\r\n                    </form>\r\n                </div>\r\n\r\n            </div >\r\n            <Downloader htmlInputId={`expensesPageHeaderTitle`} name={\"Expenses-sheet\"} />\r\n            < div id=\"expensesPageHeaderTitle\" >\r\n\r\n                {loading ? (<Loader></Loader >) :\r\n                    <table class=\"table table-striped table-hover\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th scope=\"col\">#</th>\r\n                                <th scope=\"col\">Date</th>\r\n                                <th scope=\"col\">Total Attendances</th>\r\n                                <th scope=\"col\">Expenses(PKR)</th>\r\n                            </tr>\r\n                        </thead>\r\n\r\n                        {expensesPerMonth?.map(item => (\r\n\r\n                            <tbody>\r\n                                <tr key={item.id}>\r\n                                    <th scope=\"row\">{item.id}</th>\r\n                                    <td>{item.date}</td>\r\n                                    <td>{item.total_attendances}</td>\r\n                                    <td>{item.expenses_per_day}</td>\r\n                                </tr>\r\n                            </tbody>\r\n\r\n                        ))}\r\n\r\n\r\n                        <thead>\r\n                            <tr>\r\n\r\n                                <th scope=\"row\">Total Expenses</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr>\r\n\r\n                                <td scope=\"row\" >{totalExpenses}</td>\r\n                            </tr>\r\n\r\n                        </tbody>\r\n                    </table>\r\n                }\r\n\r\n            </div >\r\n\r\n\r\n\r\n\r\n        </div >\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}