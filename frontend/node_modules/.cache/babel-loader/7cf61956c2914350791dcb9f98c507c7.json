{"ast":null,"code":"import _toConsumableArray from\"F:/mess-manager/mess_manager/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"F:/mess-manager/mess_manager/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// for this month bill\nimport React,{useState,useRef,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{getAttendance}from'../../actions/attendance_actions';import Loader from\"../../components/Loader\";import Message from\"../../components/Message\";import{useNavigate}from\"react-router-dom\";import{listUsers}from\"../../actions/user_actions\";import{useDispatch,useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PreviousAttendance(){var dispatch=useDispatch();var myRef=useRef(null);var navigate=useNavigate();var _useState=useState(\"Months\"),_useState2=_slicedToArray(_useState,2),sortBy=_useState2[0],setSortBy=_useState2[1];var _useSelector=useSelector(function(state){return state.getAttendance;}),attendance=_useSelector.attendance,loading=_useSelector.loading,error=_useSelector.error;var _useSelector2=useSelector(function(state){return state.userLogin;}),userInfo=_useSelector2.userInfo;useEffect(function(){if(userInfo&&userInfo.isAdmin){dispatch(getAttendance());dispatch(listUsers());console.log(months);}else{navigate(\"/login\");}},[dispatch,userInfo,navigate]);var YYYY=attendance===null||attendance===void 0?void 0:attendance.map(function(item){return item.date.split(\"-\")[0];});var YYYYset=_toConsumableArray(new Set(YYYY));// 2020-12-06\nvar MM=attendance===null||attendance===void 0?void 0:attendance.map(function(item){return item.date.split(\"-\")[1];});var MMset=_toConsumableArray(new Set(MM));var months=[];for(var index=0;index<MMset.length;index++){var element=MMset[index];var monthName=Intl.DateTimeFormat('en',{month:'long'}).format(new Date(element));months.push(monthName);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"h1 text-center text-dark\",id:\"pageHeaderTitle\",children:[\"Previous Attendance From  \",/*#__PURE__*/_jsx(\"code\",{children:\"MM-YYYY\"}),\"  to \",/*#__PURE__*/_jsx(\"code\",{children:\"MM-YYYY\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"h4 text-end\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"sort\",children:\"View by:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"sort\",value:sortBy,onChange:function onChange(e){return setSortBy(e.target.value);},ref:myRef,id:\"sort-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Members\",children:\"Members\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Months\",children:\"Months\"})]})]}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):months===null||months===void 0?void 0:months.map(function(month){YYYYset===null||YYYYset===void 0?void 0:YYYYset.map(function(year){return/*#__PURE__*/_jsxs(\"table\",{class:\"table table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Year\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:sortBy}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Go to\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:year.indexOf(year)},year.indexOf(year)),/*#__PURE__*/_jsx(\"td\",{children:year}),/*#__PURE__*/_jsx(\"td\",{children:month}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"button button-primary\",children:\"See\"})})]})})]});});})]});}export default PreviousAttendance;","map":{"version":3,"names":["React","useState","useRef","useEffect","Link","getAttendance","Loader","Message","useNavigate","listUsers","useDispatch","useSelector","PreviousAttendance","dispatch","myRef","navigate","sortBy","setSortBy","state","attendance","loading","error","userLogin","userInfo","isAdmin","console","log","months","YYYY","map","item","date","split","YYYYset","Set","MM","MMset","index","length","element","monthName","Intl","DateTimeFormat","month","format","Date","push","e","target","value","year","indexOf"],"sources":["F:/mess-manager/mess_manager/frontend/src/Screens/admin/PreviousAttendance.js"],"sourcesContent":["// for this month bill\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getAttendance } from '../../actions/attendance_actions'\r\nimport Loader from \"../../components/Loader\";\r\nimport Message from \"../../components/Message\"\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { listUsers } from \"../../actions/user_actions\";\r\n\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nfunction PreviousAttendance() {\r\n    const dispatch = useDispatch()\r\n    const myRef = useRef(null)\r\n    const navigate = useNavigate()\r\n    const [sortBy, setSortBy] = useState(\"Months\");\r\n\r\n    const { attendance, loading, error } = useSelector((state) => state.getAttendance);\r\n    const { userInfo } = useSelector((state) => state.userLogin);\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if (userInfo && userInfo.isAdmin) {\r\n            dispatch(getAttendance());\r\n            dispatch(listUsers())\r\n\r\n\r\n            console.log(months)\r\n\r\n        } else {\r\n            navigate(\"/login\");\r\n        }\r\n\r\n    }, [dispatch, userInfo, navigate]);\r\n\r\n    const YYYY = attendance?.map(item => item.date.split(\"-\")[0])\r\n\r\n    const YYYYset = [...new Set(YYYY)]\r\n\r\n    // 2020-12-06\r\n    const MM = attendance?.map(item => item.date.split(\"-\")[1])\r\n    const MMset = [...new Set(MM)]\r\n\r\n\r\n    const months = []\r\n    for (let index = 0; index < MMset.length; index++) {\r\n        const element = MMset[index];\r\n        const monthName = Intl.DateTimeFormat('en', { month: 'long' }).format(new Date(element));\r\n\r\n        months.push(monthName)\r\n    }\r\n\r\n    return (\r\n\r\n\r\n        <div>\r\n            <div className=\"h1 text-center text-dark\" id=\"pageHeaderTitle\">\r\n                Previous Attendance From  <code>MM-YYYY</code>  to <code>MM-YYYY</code>\r\n            </div>\r\n\r\n\r\n            <div className=\"h4 text-end\">\r\n                <label for=\"sort\">View by:</label>\r\n                <select name=\"sort\" value={sortBy} onChange={(e) => setSortBy(e.target.value)} ref={myRef} id=\"sort-select\">\r\n                    <option value=\"Members\">Members</option>\r\n                    <option value=\"Months\">Months</option>\r\n                </select>\r\n            </div>\r\n\r\n            {\r\n                loading ? <Loader /> : error ? <Message variant={\"danger\"}>{error}</Message> :\r\n                    (months?.map(month => {\r\n                        YYYYset?.map(year => (\r\n\r\n                            <table class=\"table table-striped\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th scope=\"col\">#</th>\r\n                                        <th scope=\"col\">Year</th>\r\n                                        <th scope=\"col\">{sortBy}</th>\r\n                                        <th scope=\"col\">Go to</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr>\r\n                                        <th scope=\"row\" key={year.indexOf(year)}>{year.indexOf(year)}</th>\r\n                                        <td>{year}</td>\r\n                                        <td>{month}</td>\r\n                                        <td><button className=\"button button-primary\">See</button></td>\r\n                                    </tr>\r\n\r\n\r\n\r\n                                </tbody>\r\n                            </table>\r\n                        ))\r\n                    })\r\n\r\n                    )\r\n            }\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default PreviousAttendance;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}