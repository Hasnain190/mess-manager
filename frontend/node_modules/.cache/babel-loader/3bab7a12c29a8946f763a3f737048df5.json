{"ast":null,"code":"import _toConsumableArray from\"F:/mess-manager/mess_manager/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import AttendanceSheet from'./AttendanceSheet';import React,{useState,useEffect,useRef}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{getAttendance}from\"../../../actions/attendance_actions\";import{useNavigate}from\"react-router-dom\";import{listUsers}from\"../../../actions/user_actions\";import ConvertToMonth from'../../../components/ConvertToMonth';import DailyAttendance from'./DailyAttendance';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function MonthlyAttendance(){var dispatch=useDispatch();var navigate=useNavigate();var _useSelector=useSelector(function(state){return state.userLogin;}),userInfo=_useSelector.userInfo;var _useSelector2=useSelector(function(state){return state.getAttendance;}),attendance=_useSelector2.attendance,error=_useSelector2.error,loading=_useSelector2.loading;var _useSelector3=useSelector(function(state){return state.userList;}),users=_useSelector3.users;var monthDateList=attendance===null||attendance===void 0?void 0:attendance.map(function(item){return Number(item.date.split(\"-\")[1]);});//[06,06,06]\nvar monthDateSet=_toConsumableArray(new Set(monthDateList));useEffect(function(){if(userInfo&&userInfo.isAdmin){dispatch(listUsers());dispatch(getAttendance());}else{navigate('./login');}},[navigate,dispatch,userInfo]);var filteredAttendance=function filteredAttendance(number){return attendance.filter(function(item){return Number(item.date.split(\"-\")[1])===number;});};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:monthDateSet.map(function(item){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{class:\"h1 text-center text-dark\",id:\"pageHeaderTitle\",children:[\"Attendance of \",/*#__PURE__*/_jsx(\"code\",{children:/*#__PURE__*/_jsx(ConvertToMonth,{number:item})})]}),/*#__PURE__*/_jsx(DailyAttendance,{month:item,filteredMonthlyAttendance:filteredAttendance(item)},item)]});})});}export default MonthlyAttendance;","map":{"version":3,"names":["AttendanceSheet","React","useState","useEffect","useRef","useSelector","useDispatch","getAttendance","useNavigate","listUsers","ConvertToMonth","DailyAttendance","MonthlyAttendance","dispatch","navigate","state","userLogin","userInfo","attendance","error","loading","userList","users","monthDateList","map","item","Number","date","split","monthDateSet","Set","isAdmin","filteredAttendance","number","filter"],"sources":["F:/mess-manager/mess_manager/frontend/src/Screens/admin/attendances/MonthlyAttendance.js"],"sourcesContent":["import AttendanceSheet from './AttendanceSheet'\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { getAttendance } from \"../../../actions/attendance_actions\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { listUsers } from \"../../../actions/user_actions\";\r\nimport ConvertToMonth from '../../../components/ConvertToMonth';\r\nimport DailyAttendance from './DailyAttendance'\r\n\r\nfunction MonthlyAttendance() {\r\n\r\n    const dispatch = useDispatch();\r\n    const navigate = useNavigate();\r\n\r\n\r\n    const { userInfo } = useSelector((state) => state.userLogin);\r\n\r\n    const { attendance, error, loading } = useSelector(state => state.getAttendance)\r\n    const { users } = useSelector(state => state.userList)\r\n    const monthDateList = attendance?.map(item => Number((item.date).split(\"-\")[1])) //[06,06,06]\r\n    const monthDateSet = [...new Set(monthDateList)]\r\n\r\n    useEffect(() => {\r\n        if (userInfo && userInfo.isAdmin) {\r\n            dispatch(listUsers())\r\n            dispatch(getAttendance())\r\n        } else {\r\n            navigate('./login')\r\n        }\r\n    }, [navigate, dispatch, userInfo])\r\n\r\n    const filteredAttendance = (number) => attendance.filter(item => Number((item.date).split(\"-\")[1]) === number)\r\n\r\n\r\n    return (\r\n        <div className='container'>\r\n            {monthDateSet.map(item => (\r\n                <>\r\n                    <div class=\"h1 text-center text-dark\" id=\"pageHeaderTitle\">\r\n                        Attendance of <code><ConvertToMonth number={(item)} /></code>\r\n                    </div>\r\n\r\n                    <DailyAttendance key={item} month={item} filteredMonthlyAttendance={filteredAttendance(item)} />\r\n                </>\r\n            ))\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MonthlyAttendance\r\n"],"mappings":"mIAAA,MAAOA,gBAAP,KAA4B,mBAA5B,CACA,MAAOC,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,MAArC,KAAmD,OAAnD,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,aAAT,KAA8B,qCAA9B,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,SAAT,KAA0B,+BAA1B,CACA,MAAOC,eAAP,KAA2B,oCAA3B,CACA,MAAOC,gBAAP,KAA4B,mBAA5B,C,6IAEA,QAASC,kBAAT,EAA6B,CAEzB,GAAMC,SAAQ,CAAGP,WAAW,EAA5B,CACA,GAAMQ,SAAQ,CAAGN,WAAW,EAA5B,CAGA,iBAAqBH,WAAW,CAAC,SAACU,KAAD,QAAWA,MAAK,CAACC,SAAjB,EAAD,CAAhC,CAAQC,QAAR,cAAQA,QAAR,CAEA,kBAAuCZ,WAAW,CAAC,SAAAU,KAAK,QAAIA,MAAK,CAACR,aAAV,EAAN,CAAlD,CAAQW,UAAR,eAAQA,UAAR,CAAoBC,KAApB,eAAoBA,KAApB,CAA2BC,OAA3B,eAA2BA,OAA3B,CACA,kBAAkBf,WAAW,CAAC,SAAAU,KAAK,QAAIA,MAAK,CAACM,QAAV,EAAN,CAA7B,CAAQC,KAAR,eAAQA,KAAR,CACA,GAAMC,cAAa,CAAGL,UAAH,SAAGA,UAAH,iBAAGA,UAAU,CAAEM,GAAZ,CAAgB,SAAAC,IAAI,QAAIC,OAAM,CAAED,IAAI,CAACE,IAAN,CAAYC,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAD,CAAV,EAApB,CAAtB,CAAiF;AACjF,GAAMC,aAAY,oBAAO,GAAIC,IAAJ,CAAQP,aAAR,CAAP,CAAlB,CAEApB,SAAS,CAAC,UAAM,CACZ,GAAIc,QAAQ,EAAIA,QAAQ,CAACc,OAAzB,CAAkC,CAC9BlB,QAAQ,CAACJ,SAAS,EAAV,CAAR,CACAI,QAAQ,CAACN,aAAa,EAAd,CAAR,CACH,CAHD,IAGO,CACHO,QAAQ,CAAC,SAAD,CAAR,CACH,CACJ,CAPQ,CAON,CAACA,QAAD,CAAWD,QAAX,CAAqBI,QAArB,CAPM,CAAT,CASA,GAAMe,mBAAkB,CAAG,QAArBA,mBAAqB,CAACC,MAAD,QAAYf,WAAU,CAACgB,MAAX,CAAkB,SAAAT,IAAI,QAAIC,OAAM,CAAED,IAAI,CAACE,IAAN,CAAYC,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAD,CAAN,GAAsCK,MAA1C,EAAtB,CAAZ,EAA3B,CAGA,mBACI,YAAK,SAAS,CAAC,WAAf,UACKJ,YAAY,CAACL,GAAb,CAAiB,SAAAC,IAAI,qBAClB,wCACI,aAAK,KAAK,CAAC,0BAAX,CAAsC,EAAE,CAAC,iBAAzC,yCACkB,mCAAM,KAAC,cAAD,EAAgB,MAAM,CAAGA,IAAzB,EAAN,EADlB,GADJ,cAKI,KAAC,eAAD,EAA4B,KAAK,CAAEA,IAAnC,CAAyC,yBAAyB,CAAEO,kBAAkB,CAACP,IAAD,CAAtF,EAAsBA,IAAtB,CALJ,GADkB,EAArB,CADL,EADJ,CAcH,CAED,cAAeb,kBAAf"},"metadata":{},"sourceType":"module"}