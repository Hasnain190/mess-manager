{"ast":null,"code":"import _slicedToArray from\"F:/mess-manager/mess_manager/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// for this month bill\nimport React,{useEffect,useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{counter}from\"../../../components/counter\";import{useDispatch,useSelector}from\"react-redux\";import{getAttendance}from'../../../actions/attendance_actions';import{addExpenses}from'../../../actions/expenses_actions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TodayExpenses(){var dispatch=useDispatch();var navigate=useNavigate();useEffect(function(){dispatch(getAttendance());if(success){navigate('admin/expenses/monthly');}},[date,getAttendanceObj,dispatch]);var _useState=useState(0),_useState2=_slicedToArray(_useState,2),todayExpenses=_useState2[0],setTodayExpenses=_useState2[1];var _useSelector=useSelector(function(state){return state.getAttendance;}),getAttendanceObj=_useSelector.attendance,getAttendanceError=_useSelector.error,getAttendanceLoading=_useSelector.loading;var _useSelector2=useSelector(function(state){return state.addExpenses;}),success=_useSelector2.success;var submitHandler=function submitHandler(e){e.preventDefault();// let expenses = {\n//     date: date,\n//     total_attendances: count,\n//     expenses_per_day: todayExpenses,\n//     expenses_per_capita: expensePerCapita,\n// }\ntry{dispatch(addExpenses({date:date,total_attendances:count,expenses_per_day:todayExpenses,expenses_per_capita:expensePerCapita}));console.log(todayExpenses);}catch(error){console.log(error);}};var today=new Date().toISOString().substr(0,10);var _useState3=useState(today),_useState4=_slicedToArray(_useState3,2),date=_useState4[0],setDate=_useState4[1];var count=counter(getAttendanceObj,date);var expensePerCapita=(todayExpenses/count).toFixed(2);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"h1 text-center text-dark\",id:\"pageHeaderTitle\",children:[\"Enter \",/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"date\",value:date,onChange:function onChange(e){return setDate(e.target.value);},max:today}),\"'s Expenses\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 mx-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card card-body\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Today's Expenses:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-group\",id:\"name\",placeholder:\"Enter value\",value:todayExpenses,onChange:function onChange(e){return setTodayExpenses(e.target.value);}}),/*#__PURE__*/_jsxs(\"ul\",{class:\"list-group list-group-flush\",children:[/*#__PURE__*/_jsx(\"label\",{class:\"list-group-item  card-header\",children:\"Total Attendances\"}),/*#__PURE__*/_jsx(\"li\",{class:\"list-group-item\",children:count}),/*#__PURE__*/_jsx(\"label\",{class:\"list-group-item  card-header\",children:\"Expense Per Capita\"}),/*#__PURE__*/_jsx(\"li\",{class:\"list-group-item\",children:expensePerCapita})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Submit\"})]})})})})]});}export default TodayExpenses;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","counter","useDispatch","useSelector","getAttendance","addExpenses","TodayExpenses","dispatch","navigate","success","date","getAttendanceObj","todayExpenses","setTodayExpenses","state","attendance","getAttendanceError","error","getAttendanceLoading","loading","submitHandler","e","preventDefault","total_attendances","count","expenses_per_day","expenses_per_capita","expensePerCapita","console","log","today","Date","toISOString","substr","setDate","toFixed","target","value"],"sources":["F:/mess-manager/mess_manager/frontend/src/Screens/admin/expenses/TodayExpenses.js"],"sourcesContent":["// for this month bill\nimport React, { useEffect, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { counter } from \"../../../components/counter\"\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getAttendance } from '../../../actions/attendance_actions'\nimport { addExpenses } from '../../../actions/expenses_actions'\n\nfunction TodayExpenses() {\n    const dispatch = useDispatch()\n    const navigate = useNavigate()\n\n    useEffect(() => {\n        dispatch(getAttendance());\n        if (success) {\n            navigate('admin/expenses/monthly')\n        }\n\n    }, [date, getAttendanceObj, dispatch])\n\n    const [todayExpenses, setTodayExpenses] = useState(0)\n    const { attendance: getAttendanceObj, error: getAttendanceError, loading: getAttendanceLoading } = useSelector(state => state.getAttendance)\n\n    const { success } = useSelector(state => state.addExpenses)\n    const submitHandler = (e) => {\n        e.preventDefault();\n\n        // let expenses = {\n\n        //     date: date,\n        //     total_attendances: count,\n        //     expenses_per_day: todayExpenses,\n        //     expenses_per_capita: expensePerCapita,\n\n\n        // }\n        try {\n\n            dispatch(addExpenses({\n\n                date: date,\n                total_attendances: count,\n                expenses_per_day: todayExpenses,\n                expenses_per_capita: expensePerCapita,\n\n\n            }))\n            console.log(todayExpenses)\n        } catch (error) {\n            console.log(error)\n        }\n\n\n    }\n\n\n\n    const today = new Date().toISOString().substr(0, 10);\n    const [date, setDate] = useState(today)\n    const count = counter(getAttendanceObj, date)\n\n\n    const expensePerCapita = (todayExpenses / count).toFixed(2);\n    return (\n        <div className=\"container\">\n            <div class=\"h1 text-center text-dark\" id=\"pageHeaderTitle\">\n                Enter <input type=\"date\" id=\"date\" value={date} onChange={(e) => setDate(e.target.value)} max={today} />'s Expenses\n            </div>\n            <div className=\"row\">\n                <div className=\"col-md-6 mx-auto\">\n                    <div className=\"card card-body\">\n\n                        <form onSubmit={submitHandler}>\n\n\n                            <label htmlFor=\"name\">Today's Expenses:</label>\n                            <input\n                                type=\"number\"\n                                className=\"form-group\"\n                                id=\"name\"\n                                placeholder=\"Enter value\"\n                                value={todayExpenses}\n                                onChange={(e) => setTodayExpenses(e.target.value)}\n                            />\n\n                            <ul class=\"list-group list-group-flush\">\n                                <label class=\"list-group-item  card-header\">Total Attendances</label>\n                                <li class=\"list-group-item\">{count}</li>\n\n                                <label class=\"list-group-item  card-header\">Expense Per Capita</label>\n                                <li class=\"list-group-item\">{expensePerCapita}</li>\n                            </ul>\n\n                            <button type=\"submit\" className=\"btn btn-primary\">\n                                Submit\n                            </button>\n\n\n\n                        </form>\n\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default TodayExpenses;\n"],"mappings":"2HAAA;AACA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,IAAT,CAAeC,WAAf,KAAkC,kBAAlC,CACA,OAASC,OAAT,KAAwB,6BAAxB,CAEA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,aAAT,KAA8B,qCAA9B,CACA,OAASC,WAAT,KAA4B,mCAA5B,C,wFAEA,QAASC,cAAT,EAAyB,CACrB,GAAMC,SAAQ,CAAGL,WAAW,EAA5B,CACA,GAAMM,SAAQ,CAAGR,WAAW,EAA5B,CAEAH,SAAS,CAAC,UAAM,CACZU,QAAQ,CAACH,aAAa,EAAd,CAAR,CACA,GAAIK,OAAJ,CAAa,CACTD,QAAQ,CAAC,wBAAD,CAAR,CACH,CAEJ,CANQ,CAMN,CAACE,IAAD,CAAOC,gBAAP,CAAyBJ,QAAzB,CANM,CAAT,CAQA,cAA0CT,QAAQ,CAAC,CAAD,CAAlD,wCAAOc,aAAP,eAAsBC,gBAAtB,eACA,iBAAmGV,WAAW,CAAC,SAAAW,KAAK,QAAIA,MAAK,CAACV,aAAV,EAAN,CAA9G,CAAoBO,gBAApB,cAAQI,UAAR,CAA6CC,kBAA7C,cAAsCC,KAAtC,CAA0EC,oBAA1E,cAAiEC,OAAjE,CAEA,kBAAoBhB,WAAW,CAAC,SAAAW,KAAK,QAAIA,MAAK,CAACT,WAAV,EAAN,CAA/B,CAAQI,OAAR,eAAQA,OAAR,CACA,GAAMW,cAAa,CAAG,QAAhBA,cAAgB,CAACC,CAAD,CAAO,CACzBA,CAAC,CAACC,cAAF,GAEA;AAEA;AACA;AACA;AACA;AAGA;AACA,GAAI,CAEAf,QAAQ,CAACF,WAAW,CAAC,CAEjBK,IAAI,CAAEA,IAFW,CAGjBa,iBAAiB,CAAEC,KAHF,CAIjBC,gBAAgB,CAAEb,aAJD,CAKjBc,mBAAmB,CAAEC,gBALJ,CAAD,CAAZ,CAAR,CASAC,OAAO,CAACC,GAAR,CAAYjB,aAAZ,EACH,CAAC,MAAOK,KAAP,CAAc,CACZW,OAAO,CAACC,GAAR,CAAYZ,KAAZ,EACH,CAGJ,CA7BD,CAiCA,GAAMa,MAAK,CAAG,GAAIC,KAAJ,GAAWC,WAAX,GAAyBC,MAAzB,CAAgC,CAAhC,CAAmC,EAAnC,CAAd,CACA,eAAwBnC,QAAQ,CAACgC,KAAD,CAAhC,yCAAOpB,IAAP,eAAawB,OAAb,eACA,GAAMV,MAAK,CAAGvB,OAAO,CAACU,gBAAD,CAAmBD,IAAnB,CAArB,CAGA,GAAMiB,iBAAgB,CAAG,CAACf,aAAa,CAAGY,KAAjB,EAAwBW,OAAxB,CAAgC,CAAhC,CAAzB,CACA,mBACI,aAAK,SAAS,CAAC,WAAf,wBACI,aAAK,KAAK,CAAC,0BAAX,CAAsC,EAAE,CAAC,iBAAzC,iCACU,cAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,MAAtB,CAA6B,KAAK,CAAEzB,IAApC,CAA0C,QAAQ,CAAE,kBAACW,CAAD,QAAOa,QAAO,CAACb,CAAC,CAACe,MAAF,CAASC,KAAV,CAAd,EAApD,CAAoF,GAAG,CAAEP,KAAzF,EADV,iBADJ,cAII,YAAK,SAAS,CAAC,KAAf,uBACI,YAAK,SAAS,CAAC,kBAAf,uBACI,YAAK,SAAS,CAAC,gBAAf,uBAEI,cAAM,QAAQ,CAAEV,aAAhB,wBAGI,cAAO,OAAO,CAAC,MAAf,+BAHJ,cAII,cACI,IAAI,CAAC,QADT,CAEI,SAAS,CAAC,YAFd,CAGI,EAAE,CAAC,MAHP,CAII,WAAW,CAAC,aAJhB,CAKI,KAAK,CAAER,aALX,CAMI,QAAQ,CAAE,kBAACS,CAAD,QAAOR,iBAAgB,CAACQ,CAAC,CAACe,MAAF,CAASC,KAAV,CAAvB,EANd,EAJJ,cAaI,YAAI,KAAK,CAAC,6BAAV,wBACI,cAAO,KAAK,CAAC,8BAAb,+BADJ,cAEI,WAAI,KAAK,CAAC,iBAAV,UAA6Bb,KAA7B,EAFJ,cAII,cAAO,KAAK,CAAC,8BAAb,gCAJJ,cAKI,WAAI,KAAK,CAAC,iBAAV,UAA6BG,gBAA7B,EALJ,GAbJ,cAqBI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,oBArBJ,GAFJ,EADJ,EADJ,EAJJ,GADJ,CA2CH,CAED,cAAerB,cAAf"},"metadata":{},"sourceType":"module"}