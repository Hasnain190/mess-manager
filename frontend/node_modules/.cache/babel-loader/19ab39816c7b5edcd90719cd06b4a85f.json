{"ast":null,"code":"import _slicedToArray from\"F:/mess-manager/mess_manager/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// for this month bill\nimport React,{useEffect,useState,useRef}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{counter}from\"../../../components/counter\";import{useDispatch,useSelector}from\"react-redux\";import{getBill}from'../../../actions/expenses_actions';import Message from\"../../../components/Message\";import Loader from\"../../../components/Loader\";import Downloader from'../../../components/Downloader';import{listUsers}from\"../../../actions/user_actions\";import{addBill}from'../../../actions/expenses_actions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BillForm(){var dispatch=useDispatch();var today=new Date().toISOString().substring(0,7);var myRef=useRef();useEffect(function(){dispatch(listUsers());dispatch(getBill(date.substring(5,7)));},[date,bill]);var _useSelector=useSelector(function(state){return state.userList;}),users=_useSelector.users;var _useSelector2=useSelector(function(state){return state.getBill;}),bill=_useSelector2.bill,loading=_useSelector2.loading;var _useState=useState(today),_useState2=_slicedToArray(_useState,2),date=_useState2[0],setDate=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),billPayed=_useState4[0],setBillPayed=_useState4[1];var handleSubmit=function handleSubmit(e){e.preventDefault();dispatch(getBill(date.substring(5,7)));};function IdToStudent(_ref){var id=_ref.id;var name=users===null||users===void 0?void 0:users.find(function(user){return user.id===id;}).username;return/*#__PURE__*/_jsx(\"div\",{children:name});}var buttonClick=function buttonClick(e){e.preventDefault();// let billPayed = e.target.elements[`bill-payed-${id}`].value;\nvar month=date.substring(5,7);var id=e.target.input.id;console.log(month,e,id);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"h1 text-center text-dark\",id:\"mess-bill\",children:[\"Bill Form\",/*#__PURE__*/_jsxs(\"form\",{className:\"form form-control\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"month\",id:\"date\",value:date,onChange:function onChange(e){return setDate(e.target.value);},max:today}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"submit\",children:\"Get\"})]})]}),/*#__PURE__*/_jsx(Downloader,{htmlInputId:\"mess-bill\",name:\"Expenses-sheet\"}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(\"table\",{class:\"table table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Room No\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"This Month's Bill\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Due Bill\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Total to be Paid\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Paid Payed\"})]})}),bill===null||bill===void 0?void 0:bill.map(function(item){return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:item.id},item.id),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(IdToStudent,{id:item.student})}),/*#__PURE__*/_jsx(\"td\",{children:item.room}),/*#__PURE__*/_jsx(\"td\",{children:item.bill.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{children:item.dues.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{children:item.total.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:buttonClick,children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",id:\"bill-payed-\".concat(item.id),type:\"number\",onChange:function onChange(e){return e.target.value;}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"submit\",name:\"id-input-\".concat(item.student),children:\" Add Bill\"})]})})]})});})]})]});}export default BillForm;","map":{"version":3,"names":["React","useEffect","useState","useRef","Link","useNavigate","counter","useDispatch","useSelector","getBill","Message","Loader","Downloader","listUsers","addBill","BillForm","dispatch","today","Date","toISOString","substring","myRef","date","bill","state","userList","users","loading","setDate","billPayed","setBillPayed","handleSubmit","e","preventDefault","IdToStudent","id","name","find","user","username","buttonClick","month","target","input","console","log","value","map","item","student","room","toFixed","dues","total"],"sources":["F:/mess-manager/mess_manager/frontend/src/Screens/admin/expenses/BillForm.js"],"sourcesContent":["// for this month bill\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { counter } from \"../../../components/counter\"\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getBill } from '../../../actions/expenses_actions'\r\nimport Message from \"../../../components/Message\";\r\nimport Loader from \"../../../components/Loader\";\r\nimport Downloader from '../../../components/Downloader';\r\nimport { listUsers } from \"../../../actions/user_actions\";\r\n\r\nimport { addBill } from '../../../actions/expenses_actions';\r\n\r\nfunction BillForm() {\r\n\r\n    const dispatch = useDispatch();\r\n    const today = new Date().toISOString().substring(0, 7);\r\n    let myRef = useRef()\r\n\r\n    useEffect(() => {\r\n        dispatch(listUsers())\r\n        dispatch(getBill(date.substring(5, 7)))\r\n    }, [date, bill])\r\n\r\n    const { users } = useSelector(state => state.userList)\r\n    const { bill, loading } = useSelector(state => state.getBill)\r\n    const [date, setDate] = useState(today)\r\n\r\n\r\n    const [billPayed, setBillPayed] = useState(0)\r\n\r\n\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        dispatch(getBill(date.substring(5, 7)))\r\n    }\r\n    function IdToStudent({ id }) {\r\n        const name = users?.find(user => user.id === id).username\r\n        return (\r\n            <div>{name}</div>\r\n        )\r\n    }\r\n\r\n    const buttonClick = (e) => {\r\n\r\n        e.preventDefault()\r\n\r\n        // let billPayed = e.target.elements[`bill-payed-${id}`].value;\r\n\r\n        let month = date.substring(5, 7)\r\n        let id = e.target.input.id\r\n        console.log(month, e, id)\r\n\r\n    }\r\n    return (\r\n        <div className=\"container\">\r\n            <div class=\"h1 text-center text-dark\" id=\"mess-bill\">\r\n                Bill Form\r\n                <form className=\"form form-control\" onSubmit={handleSubmit} >\r\n                    <input type=\"month\" id=\"date\" value={date} onChange={(e) => setDate(e.target.value)} max={today} />\r\n\r\n                    <button className=\"btn btn-primary\" type=\"submit\">Get</button>\r\n                </form>\r\n            </div>\r\n\r\n\r\n            <Downloader htmlInputId={`mess-bill`} name={\"Expenses-sheet\"} />\r\n\r\n            {loading ? (<Loader ></Loader>) :\r\n\r\n\r\n\r\n                <table class=\"table table-striped\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th scope=\"col\">#</th>\r\n                            <th scope=\"col\">Name</th>\r\n                            <th scope=\"col\">Room No</th>\r\n                            <th scope=\"col\">This Month's Bill</th>\r\n                            <th scope=\"col\">Due Bill</th>\r\n                            <th scope=\"col\">Total to be Paid</th>\r\n                            <th scope=\"col\">Paid Payed</th>\r\n                        </tr>\r\n                    </thead>\r\n                    {bill?.map(item =>\r\n                        <tbody>\r\n                            <tr>\r\n                                <th scope=\"row\" key={item.id} >{item.id}</th>\r\n                                <td><IdToStudent id={(item.student)} /></td>\r\n                                <td>{item.room}</td>\r\n                                <td>{item.bill.toFixed(2)}</td>\r\n                                <td>{item.dues.toFixed(2)}</td>\r\n                                <td>{item.total.toFixed(2)}</td>\r\n                                <td>\r\n\r\n                                    <form className=\"form\" onSubmit={buttonClick}>\r\n                                        <input className=\"form-control\" id={`bill-payed-${item.id}`} type=\"number\" onChange={(e) => (e.target.value)}></input>\r\n                                        <button className='btn btn-primary' type=\"submit\" name={`id-input-${item.student}`} > Add Bill</button>\r\n                                    </form>\r\n                                </td>\r\n                            </tr>\r\n\r\n\r\n                        </tbody>\r\n                    )}\r\n                </table>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default BillForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}